---
title: "はじめてのプロジェクトマネジメントでやりたい放題した結果"
emoji: "🐙"
type: "idea" # tech: 技術記事 / idea: アイデア
topics: ["プロジェクトマネジメント"]
published: false
publication_name: "praha"
---

株式会社プラハは2022年、株式会社アガルートによるM&Aで子会社となりました。

この変化の一環として、アガルート社長自らがプロダクトオーナーのひとりとして参加する新規プロダクト開発が始まりました。プロダクトの開発はプラハの私たちが担当し、私も「開発チームのリーダー」としてそのチームに加わることになりました。

これまでアガルートでは伝統的なウォーターフォール開発の方法しか採用していなかったため、このプロジェクトを通じてアジャイル開発の方法を社長にも体験してもらう絶好の機会でした。私自身、開発メンバーとしての経験しかなかったものの、エクストリームプログラミングやアジャイル開発に大きな興味を持っており、実践の場を得られたことが非常に嬉しかったです。私はこのプロジェクトで、これまで「こうすればもっと良くなるかも？」と考えていたアイデアを試すことにしました。

## やったこと

### 「欲しい機能一覧」を受け取ったが、いったん白紙に戻した

プロジェクトが始まる際、プロダクトオーナーから「欲しい機能一覧」を受け取りました。この一覧は有用な情報源として受け止めつつも、ユーザーが真に必要とするものを創出するためには、このリストをそのまま実装すべきではないと考えました。

そこで、プロダクトオーナー、開発チーム（開発者とデザイナー）全員でキックオフミーティングを開催しました。この会議では、次の内容について話しました。

- なぜこのプロジェクトが始まったのか、という情報の共有
- 解決したい問題、もしくは誰にどのような価値を提供したいか、という情報の共有
- プロダクト開発の進め方として、すべての機能を一度に実装してからリリースするというやりかたは危険であるという認識の共有
  - 開発した機能が本当に必要なものだったかどうかは、ユーザーからのフィードバックがくるまでわからない
  - 計画が巨大であればあるほど見積もりの精度は悪くなり、計画通りに進まないことが多い
- 上記を踏まえたうえで、どのような機能をどういうやりかたで開発していくべきか、全員で議論した

プロダクトオーナー、エンジニア、デザイナーがそれぞれの経験に基づき意見を交換することができました。

そして、「成果を検証できる必要最小限の機能を備えたプロダクト」を最初にリリースし、その後機能開発を繰り返すという方針が決まりました。

### 「毎週必ず成果を見せる」開発を行った

プロダクトオーナーと開発チームとの間で信頼関係を築くことを目標に、毎週必ず成果を示す開発アプローチを採用しました。開発を順調に進めるためには、機能開発だけでなく、定期的なリファクタリングや環境の整備が必要です。しかし、非エンジニアであるプロダクトオーナーから見ると、実際に機能開発が進んでいるかの確認ができない状態で開発チームがリファクタリングや環境整備に時間を割くことは不安なのではないかと考えました。そこで、毎週、新たに実装された機能や改善点をプロダクトオーナーにデモンストレーションすることで、進捗を具体的に示すことにしました。

この定期的なデモンストレーションは、プロダクトオーナーに安心感を与えるだけでなく、開発チームにとっても非常に有益でした。毎週「今週末にこの機能をデモする」という具体的な目標を設定することで、チーム全員が明確な方向性を持って効率的に作業を進めることができました。さらに、社長自身が「このように迅速かつ柔軟に開発が進められるなら、いまとは違う事業のやり方も考えられる」という新たな気づきを得ることができたという大きな成果もありました。

### CI/CDなどの仕組みづくりは最初から力いっぱいやった

開発プロセスの初期段階から、CI/CDやその他の環境整備に力を入れることで、コードの品質を担保し、開発効率を向上させました。毎週の成果発表を通じてプロダクトオーナーからの信頼を確立する一方で、定期的なリファクタリングと環境の整備も平行して行いました。

実施した環境整備は多岐にわたります。

- 自動テストの整備
  - DockerでDBを用意してクエリを実行するテスト
  - Storybookを使ったUIのテスト
  - Playwrightを使ったE2Eテスト
- 自動デプロイの整備
  - 任意のブランチをチェックアウトしてビルド→デプロイするGitHub Workflow
  - develop/staging/mainブランチへのマージ時に自動でビルド→デプロイするGitHub Workflow
- Turborepoを使ったモノレポの管理、ビルドや開発の効率化
- インフラのコード化
- Figmaからデザイントークン（json）を生成→Reactから利用するための仕組み
- renovateを使った依存パッケージの自動更新
- アプリケーションの監視 → エラー・アラートをSlackに通知する仕組み

これらの仕組みのいくつかは他のプロダクトから流用したり、社内ライブラリとして実装して利用しているものもあります。これらの詳細はそれだけで一連の記事になり得るため、別途詳述する予定です。いくつかすでに記事になっています。

https://zenn.dev/praha/articles/7e3eca94203862

https://zenn.dev/praha/articles/11acc8f530078a

https://zenn.dev/praha/articles/d583133c6ecb2f

### 行動分析ツールを導入した

迅速で柔軟な開発が実現したところで、ユーザーへの価値提供ができていなければ（できていることが確認できなければ）意味がありません。ユーザーが想定通りにアプリケーションを操作しているか、どの点で躓いているかを把握するために、行動分析ツールを導入しました。

具体的には、セッションリプレイ機能を備えたPostHogを採用しました。プラハ社内の別チームのメンバーに教えてもらってはじめて知ったサービスだったのですが、セッションリプレイだけでなく各種分析機能やFeature Flagなどの機能も備えており、非常に使い勝手が良いと絶賛だたため、採用しました。

実際使ってみて、評判通りの使い勝手の良さでした。機能が多くまだ使いこなせてない部分もあるため、引き続き機能を活用していきたいと考えています。

### git-flowをやめた

無事に初回リリースを迎えることができました。

当初のプロジェクトではgitのブランチ戦略としてgit-flowの方法を採用していたのですが、開発効率の向上とともにプロダクトオーナーからの要望も増えてきたタイミングで、これが開発プロセスのボトルネックとなることが明らかになりました。具体的には、変更を「develop → staging → main」に順にマージしていくプロセスが、新たな要望や優先順位の変更に柔軟に対応するのを難しくしていました。また、自動デプロイが可能であっても、デプロイが即座にリリースを意味するため、急な変更や優先順位の再調整が困難でした。

この問題に対処するため、PostHogのFeature Flag機能を活用することで、大きな転換を遂げました。この機能により、変更を本番環境に反映することなくデプロイが可能となり、デプロイとリリースを別々に管理することができるようになりました。これによって、開発プロセスがより柔軟になり、緊急の依頼や開発の優先順位の変更にも迅速に対応できるようになりました。

## おまけ

実際こういうやり方で開発してみてどうだったか？これからどうして行きたいか？を社長にインタビューしてみました。

（公開されたらpodcastのリンク貼る）
