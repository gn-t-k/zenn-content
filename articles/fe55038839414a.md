---
title: "ä½¿ã„ã‚„ã™ã„ãƒ•ã‚©ãƒ¼ãƒ ã‚’å®Ÿè£…ã™ã‚‹ãŸã‚ã®å·¥å¤«ï¼ˆä¾‹ï¼‰ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ "
emoji: "ğŸ™Œ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£", "chakraui", "reacthookform"]
published: false
publication_name: "praha"
---

ãƒ•ã‚©ãƒ¼ãƒ ã¯webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚‚ã£ã¨ã‚‚é‡è¦ãªè¦ç´ ã®1ã¤ã§ã‚ã‚Šã€ãƒ•ã‚©ãƒ¼ãƒ ã®ä½¿ã„ã‚„ã™ã•ã¯webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½¿ã„ã‚„ã™ã•ã«ç›´çµã—ã¾ã™ã€‚Chakra UIã¨React Hook Formã‚’ä½¿ã£ãŸå®Ÿè£…ã‚’ä¾‹ã«ã€ä½¿ã„ã‚„ã™ã„ãƒ•ã‚©ãƒ¼ãƒ ã‚’å®Ÿè£…ã™ã‚‹ãŸã‚ã®å·¥å¤«ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚

## å®Ÿè£…ã™ã‚‹ãƒ•ã‚©ãƒ¼ãƒ 

3ã¤ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨1ã¤ã®é€ä¿¡ãƒœã‚¿ãƒ³ã‚’å«ã‚€ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚

![3ã¤ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¨1ã¤ã®é€ä¿¡ãƒœã‚¿ãƒ³ã‚’å«ã‚€ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ ](/images/articles/fe55038839414a/image01.png)

å®Ÿè£…ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚

:::details register-form.tsx

```tsx
import {
  Button,
  Container,
  FormControl,
  FormErrorMessage,
  FormLabel,
  Heading,
  Input,
  Stack,
  useToast,
} from "@chakra-ui/react";
import { useCallback, useEffect } from "react";

import type { MutationState } from "@/utils/mutation-state";

import { useRegisterForm } from "./use-register-form";

import type { RegisterField } from "./use-register-form";
import type { FC } from "react";
import type { SubmitHandler } from "react-hook-form";

type Props = {
  register: Register;
  registerStatus: MutationState;
};
export const RegisterForm: FC<Props> = (props) => {
  const {
    register,
    handleSubmit,
    formState: { errors },
  } = useRegisterForm();
  const toast = useToast();
  const onSubmit = useCallback<SubmitHandler<RegisterField>>(
    (fieldValues) => {
      props.register({
        name: fieldValues.name,
        email: fieldValues.email,
        password: fieldValues.password,
      });
    },
    [props]
  );

  useEffect(() => {
    switch (props.registerStatus) {
      case "success":
        toast({
          title: "ç™»éŒ²ã—ã¾ã—ãŸ",
          status: "success",
          isClosable: true,
        });
        return;
      case "error":
        toast({
          title: "ç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸ",
          status: "error",
          isClosable: true,
        });
        return;
    }
  }, [props.registerStatus, toast]);

  return (
    <Container>
      <Stack direction="column" gap={8}>
        <Heading>ç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ </Heading>
        <form onSubmit={handleSubmit(onSubmit)}>
          <Stack direction="column" gap={4}>
            <FormControl isInvalid={!!errors.name}>
              <FormLabel htmlFor="name">åå‰</FormLabel>
              <Input type="text" id="name" {...register("name")} />
              {!!errors.name && (
                <FormErrorMessage>{errors.name.message}</FormErrorMessage>
              )}
            </FormControl>
            <FormControl isInvalid={!!errors.email}>
              <FormLabel htmlFor="email">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</FormLabel>
              <Input type="email" id="email" {...register("email")} />
              {!!errors.email && (
                <FormErrorMessage>{errors.email.message}</FormErrorMessage>
              )}
            </FormControl>
            <FormControl isInvalid={!!errors.password}>
              <FormLabel htmlFor="password">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</FormLabel>
              <Input type="password" id="password" {...register("password")} />
              {!!errors.password && (
                <FormErrorMessage>{errors.password.message}</FormErrorMessage>
              )}
            </FormControl>
            <Button
              type="submit"
              isLoading={props.registerStatus === "loading"}
              isDisabled={props.registerStatus === "loading"}
            >
              ç™»éŒ²ã™ã‚‹
            </Button>
          </Stack>
        </form>
      </Stack>
    </Container>
  );
};
```

æœ¬ç­‹ã¨é–¢ä¿‚ãªã„ã®ã§é©å½“ã§ã™ãŒã€`Register`ã‚„`MutationState`ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªå‹ã«ãªã£ã¦ã„ã¾ã™ã€‚

```typescript
type Register = (props: {
  name: string;
  email: string;
  password: string;
}) => void;

export type MutationState = "idle" | "loading" | "success" | "error";
```

:::

::: details use-register-form.ts

```typescript
import { zodResolver } from "@hookform/resolvers/zod";
import { z } from "zod";

import { useForm } from "@/libs/react-hook-form/use-form";

import type { UseFormReturn } from "react-hook-form";

const registerFieldSchema = z.object({
  name: z.string().min(1, "åå‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"),
  email: z
    .string()
    .min(1, "ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„")
    .email("ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®å½¢å¼ã§å…¥åŠ›ã—ã¦ãã ã•ã„"),
  password: z.string().min(8, "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯8æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„"),
});
export type RegisterField = z.infer<typeof registerFieldSchema>;

type UseRegisterForm = (
  defaultValues?: RegisterField
) => UseFormReturn<RegisterField>;
export const useRegisterForm: UseRegisterForm = (defaultValues) => {
  return useForm<RegisterField>({
    resolver: zodResolver(registerFieldSchema),
    defaultValues: defaultValues ?? {
      name: "",
      email: "",
      password: "",
    },
  });
};
```

:::

å®Ÿéš›ã®APIãŒãªãã¦ã‚‚ã€Storybookã§å†ç¾ã§ãã¾ã™ã€‚

::: details register-form.stories.tsx

```tsx
import { action } from "@storybook/addon-actions";
import { useState } from "react";

import type { MutationState } from "@/utils/mutation-state";
import { sleep } from "@/utils/sleep";

import { RegisterForm } from "./register-form";

import type { ComponentMeta, ComponentStoryObj } from "@storybook/react";
import type { ComponentProps, FC } from "react";

type Meta = ComponentMeta<typeof RegisterForm>;
type Props = ComponentProps<typeof RegisterForm>;
type Story = ComponentStoryObj<typeof RegisterForm>;

const componentMeta: Meta = {
  component: RegisterForm,
};
export default componentMeta;

const Wrapper: FC<Partial<Props>> = (props) => {
  const [registerStatus, setRegisterStatus] = useState<MutationState>("idle");
  const register: Props["register"] = () => {
    (async (): Promise<void> => {
      setRegisterStatus("loading");
      await sleep(1000);
      action("register");
      setRegisterStatus("success");
    })();
  };
  const args: Props = {
    register: props.register ?? register,
    registerStatus: props.registerStatus ?? registerStatus,
  };

  return <RegisterForm {...args} />;
};

const Template: Story = {
  render: (props: Partial<Props>) => {
    return <Wrapper {...props} />;
  },
};

export const Default: Story = {
  ...Template,
};
```

:::

## å·¥å¤«

### ãƒ©ãƒ™ãƒ«

### ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼

### ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°

### ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ç‰¹æœ‰ã®å·¥å¤«

### submitãƒœã‚¿ãƒ³

### ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

### ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯

## å‚è€ƒ
