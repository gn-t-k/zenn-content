---
title: "ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã«ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã¤ã¤é–‹ç™ºé€Ÿåº¦ã‚’ä¿ã¤ãŸã‚ã«ã‚„ã£ãŸã“ã¨"
emoji: "ğŸ“˜"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: []
published: false
---

ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®é–‹ç™ºã«ãŠã„ã¦ã€ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’å……å®Ÿã•ã›ã‚‹ã“ã¨ã¯ã„ã„ã“ã¨ã¥ãã‚ã®ã‚ˆã†ã«æ€ãˆã¾ã™ã€‚

- æ©Ÿèƒ½ãŒå£Šã‚Œã¦ã„ãªã„ã“ã¨ã‚’ç¢ºèªã—ãªãŒã‚‰ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›´ã§ãã‚‹
  - ãƒã‚°ã®ç™ºç”Ÿã«æ°—ã¥ãã‚„ã™ããªã‚‹
  - çœã‘ã‚‹å‹•ä½œç¢ºèªãŒå¢—ãˆã€é–‹ç™ºé€Ÿåº¦ãŒå‘ä¸Šã™ã‚‹
- ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã‚„ã™ã„ã‚ˆã†ã«å·¥å¤«ã—ã¦ãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã‚ˆã†ã«ãªã‚Šã€çµæœçš„ã«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®è¨­è¨ˆã‚„ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ã‚’å‘ä¸Šã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹

ã¨ã¯ã„ãˆã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’å……å®Ÿã•ã›ã‚‹ã«ã¯ã‹ãªã‚Šå·¥æ•°ãŒå¿…è¦ã§ã™ã€‚ã¾ãŸã€ãƒ†ã‚¹ãƒˆã®æ›¸ãæ–¹ã«ã‚ˆã£ã¦ã¯ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚³ã‚¹ãƒˆã‚‚ã‹ã‹ã‚Šã€æœ€æ‚ªã®å ´åˆå£Šã‚Œã£ã±ãªã—ã§æ”¾ç½®ã•ã‚ŒãŒã¡ã§ã™ã€‚

ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®æ–°è¦é–‹ç™ºã«ã‚ãŸã£ã¦0ã‹ã‚‰ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®è¨­è¨ˆãƒ»é–‹ç™ºç’°å¢ƒæ§‹ç¯‰ã‚’ã™ã‚‹æ©Ÿä¼šãŒã‚ã£ãŸã®ã§ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ†ã‚¹ãƒˆã«ã¤ã„ã¦èª¿æŸ»ã—ã¦å†…å®¹ã‚’æ•´ç†ã—ã¾ã—ãŸã€‚

## å‰æ

React/TypeScriptã§ã™ã€‚

## Jestã€Storybookã€testing-libraryã€MSWã‚’æ´»ç”¨ã™ã‚‹

å˜ä½“ãƒ†ã‚¹ãƒˆã®è¨˜è¿°ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã—ã¦AAAãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã„ã†ã‚‚ã®ãŒçŸ¥ã‚‰ã‚Œã¦ã„ã¾ã™ã€‚AAAã¯Arrangeï¼ˆæº–å‚™ï¼‰/Actï¼ˆå®Ÿè¡Œï¼‰/Assertï¼ˆç¢ºèªï¼‰ã®é ­æ–‡å­—ã‚’ä¸¦ã¹ãŸã‚‚ã®ã§ã™ã€‚ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ†ã‚¹ãƒˆã«ãŠã„ã¦ã¯ã€Storybookã‚’[CSF3.0](https://storybook.js.org/blog/component-story-format-3-0/)ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§è¨˜è¿°ã—ï¼ˆArrangeï¼‰ã€Jestã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ä¸­ã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’renderï¼ˆActï¼‰â†’çµæœã‚’æ¤œè¨¼ï¼ˆAssertï¼‰ã™ã‚‹ã“ã¨ã§AAAãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚

@[card](https://storybook.js.org/)
@[card](https://jestjs.io/ja/)

Storybookã‚’CSF3.0ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§è¨˜è¿°ã™ã‚‹ç†ç”±ã®1ã¤ã¨ã—ã¦ã€playé–¢æ•°ãŒã‚ã‚Šã¾ã™ã€‚playé–¢æ•°å†…ã§testing-libraryã‚’ä½¿ã£ã¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ä¸Šã§è¡Œã†æ“ä½œã‚’å†ç¾ã™ã‚‹ã“ã¨ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ“ä½œã‚’ä»–ã®ãƒ†ã‚¹ãƒˆç­‰ã§å†åˆ©ç”¨å¯èƒ½ãªè³‡æã¨ã—ã¦ç®¡ç†ã§ãã¾ã™ã€‚

@[card](https://testing-library.com/)

APIãªã©ã®å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã‚’ãƒ†ã‚¹ãƒˆã§å†ç¾ã™ã‚‹ã®ã¯ã€MSWã«ã‚ˆã‚‹ãƒ¢ãƒƒã‚¯ãŒä¾¿åˆ©ã§ã™ã€‚MSWã¯ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ã‚¤ãƒ³ã‚¿ãƒ¼ã‚»ãƒ—ãƒˆã—ã¦ä»»æ„ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™ã“ã¨ãŒã§ãã¾ã™ã€‚MSWç„¡ã—ã§ãƒ¢ãƒƒã‚¯ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆã‚’ã—ãŸã„ãŒãŸã‚ã«ç„¡ç†ã‚„ã‚Šãªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ†å‰²ã—ãŸã‚Šã€ã—ã‚“ã©ã„props drillingã‚’å®Ÿè£…ã—ãŸã‚Šã™ã‚‹å¿…è¦ãŒã§ã¦ãã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ï¼ˆçµŒé¨“è«‡ï¼‰ã€‚[MSW Storybook Addon](https://storybook.js.org/addons/msw-storybook-addon)ãªã©ã€MSWã‚’Storybookã§ã†ã¾ãä½¿ã†ãŸã‚ã®addonãªã©ã‚‚ã‚ã‚Šã¾ã™ã€‚

@[card](https://mswjs.io/)

ã“ã‚Œã‚‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å…·ä½“çš„ã«ã©ã†ã‚„ã£ã¦çµ„ã¿åˆã‚ã›ã‚‹ã®ã‹ã«ã¤ã„ã¦ã§ã™ãŒã€ä»Šå›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€Storybookã®preview.jsã§MSWã®è¨­å®šã‚’ã—ã€ãã‚Œã‚’jest.setup.tsã§ã‚‚åˆ©ç”¨ã™ã‚‹ã¨ã„ã†å½¢ã§è¨­å®šã—ã¦ã„ã¾ã™ã€‚

```tsx
// preview.js
import { ChakraProvider } from "@chakra-ui/react";
import { initialize, mswDecorator } from "msw-storybook-addon";
import { createClient, Provider } from "urql";
import fetch from "cross-fetch";

// Initialize MSW
initialize();

const client = createClient({
  url: process.env.MOCK_ENDPOINT,
  fetch,
});

export const decorators = [
  (Story) => (
    <Provider value={client}>
      <ChakraProvider>
        <Story />
      </ChakraProvider>
    </Provider>
  ),
  mswDecorator,
];
```

```typescript
// jest.setup.ts
import { setGlobalConfig } from "@storybook/testing-react";

import * as globalStorybookConfig from "./.storybook/preview";

import "@testing-library/jest-dom";

// eslint-disable-next-line @typescript-eslint/no-explicit-any
setGlobalConfig(globalStorybookConfig as any);
```

è©³ç´°ãªèª¬æ˜ã¯å‰²æ„›ã—ã¾ã™ãŒã€Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å®Ÿè£…ã¨storybookã€ãƒ†ã‚¹ãƒˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚[åˆã‚ã¦ã®GraphQL](https://www.oreilly.co.jp/books/9784873118932/)ã«ã‚µãƒ³ãƒ—ãƒ«ã¨ã—ã¦å‡ºã¦ãã‚‹ã€Œã‚¹ã‚­ãƒ¼å ´ã®è·å“¡ãŒã‚³ãƒ¼ã‚¹ã¨ã‹ãƒªãƒ•ãƒˆã®çŠ¶æ…‹ã‚’ç¢ºèªãƒ»ç®¡ç†ã™ã‚‹ãŸã‚ã®GraphQL APIã€ã®ä¸€éƒ¨ã‚’GUIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã—ã¦å®Ÿè£…ã—ãŸã‚‚ã®ã§ã™ã€‚

```tsx
export const Details: FC<DetailsProps> = (props) => {
  const [query] = useGetLiftDetailsQuery({
    variables: {
      id: props.id,
    },
  });
  const [mutationState, mutate] = useSetLiftStatusMutation();
  const { isOpen, onOpen, onClose } = useDisclosure();
  const setStatus = useCallback<ComponentProps<typeof LiftForm>["setStatus"]>(
    (status) => {
      (async (): Promise<void> => {
        await mutate({
          id: props.id,
          status,
        });
        onClose();
      })();
    },
    [mutate, onClose, props.id]
  );

  if (query.fetching) {
    return <Loading description="ãƒªãƒ•ãƒˆã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ã„ã¾ã™" />;
  }

  if (query.error || !query.data) {
    return <p>ãƒªãƒ•ãƒˆã®ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ</p>;
  }

  return (
    <Stack direction="column">
      <Heading size="md">åå‰</Heading>
      <Text>{query.data.Lift.name}</Text>
      <Heading size="md">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</Heading>
      <Stack direction="row">
        {mutationState.fetching ? (
          <Spinner />
        ) : (
          <Text>{query.data.Lift.status ?? "UNKNOWN"}</Text>
        )}
        {query.data.Lift.status === undefined ? (
          <Button isDisabled>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’å¤‰æ›´</Button>
        ) : (
          <LiftForm
            defaultValues={{
              status: query.data.Lift.status,
            }}
            setStatus={setStatus}
            isOpen={isOpen}
            onOpen={onOpen}
            onClose={onClose}
          />
        )}
      </Stack>
      <Stack direction="column">
        <Heading size="md">è¡Œãå…ˆ</Heading>
        {query.data.Lift.trailAccess.map((trail) => {
          return <Text key={trail.id}>{trail.name}</Text>;
        })}
      </Stack>
    </Stack>
  );
};
```

```tsx
import { screen } from "@testing-library/react";
import userEvent from "@testing-library/user-event";

import { LiftStatus } from "@/libs/graphql-codegen/types";

import {
  mockGetLiftDetailsQueryMsw,
  mockSetLiftStatusMutationMsw,
} from "@/features/lift/details/index.generated";

import Page from "./index.page";

import type { ComponentMeta, ComponentStoryObj } from "@storybook/react";
import type { ComponentProps, FC } from "react";

type Meta = ComponentMeta<typeof Page>;
type Props = ComponentProps<typeof Page>;
type Story = ComponentStoryObj<typeof Page>;

const componentMeta: Meta = {
  component: Page,
};
export default componentMeta;

const Wrapper: FC<Partial<Props>> = (props) => {
  const defaultProps: Props = {
    id: "id-l-1",
  };

  return (
    <Page
      {...{
        ...defaultProps,
        ...props,
      }}
    />
  );
};

const Template: Story = {
  render: (props: Partial<Props>) => {
    return <Wrapper {...props} />;
  },
  parameters: {
    msw: {
      handlers: [
        mockGetLiftDetailsQueryMsw((req, res, ctx) => {
          return res(
            ctx.data({
              Lift: {
                id: "id-l-1",
                name: "ãƒªãƒ•ãƒˆ1",
                status: LiftStatus.Open,
                trailAccess: [
                  {
                    id: "id-t-1",
                    name: "ã‚³ãƒ¼ã‚¹1",
                  },
                  {
                    id: "id-t-2",
                    name: "ã‚³ãƒ¼ã‚¹2",
                  },
                ],
              },
            })
          );
        }),
        mockSetLiftStatusMutationMsw((req, res, ctx) => {
          return res(
            ctx.data({
              setLiftStatus: {
                id: "id-l-1",
              },
            })
          );
        }),
      ],
    },
  },
};

export const Default: Story = {
  ...Template,
};

export const ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´ãƒãƒƒãƒ—ã‚ªãƒ¼ãƒãƒ¼ã‚’é–‹ã: Story = {
  ...Template,
  play: async () => {
    const openPopoverButton = await screen.findByRole("button", {
      name: "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’å¤‰æ›´",
    });

    await userEvent.click(openPopoverButton);
  },
};

export const ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’Closedã«å¤‰æ›´ã—ã¦æ›´æ–°: Story = {
  ...Template,
  play: async () => {
    const openPopoverButton = await screen.findByRole("button", {
      name: "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’å¤‰æ›´",
    });
    await userEvent.click(openPopoverButton);

    const radioInputClosed = await screen.findByRole("radio", {
      name: "CLOSED",
    });
    await userEvent.click(radioInputClosed);

    const submitButton = screen.getByRole("button", {
      name: "æ›´æ–°",
    });
    await userEvent.click(submitButton);
  },
};

export const ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’Closedã«å¤‰æ›´ã—ã¦é–‰ã˜ã‚‹: Story = {
  ...Template,
  play: async () => {
    const openPopoverButton = await screen.findByRole("button", {
      name: "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’å¤‰æ›´",
    });
    await userEvent.click(openPopoverButton);

    const radioInputClosed = await screen.findByRole("radio", {
      name: "CLOSED",
    });
    await userEvent.click(radioInputClosed);

    const closeButton = screen.getByRole("button", {
      name: "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´ãƒãƒƒãƒ—ã‚ªãƒ¼ãƒãƒ¼ã‚’é–‰ã˜ã‚‹",
    });
    await userEvent.click(closeButton);
  },
};
```

```tsx
import { composeStories } from "@storybook/testing-react";
import { render, screen } from "@testing-library/react";
import userEvent from "@testing-library/user-event";

import * as stories from "./index.stories";

describe("lift-id", () => {
  const Stories = composeStories(stories);

  describe("åˆæœŸçŠ¶æ…‹", () => {
    beforeEach(() => {
      render(<Stories.Default />);
    });

    test("ãƒªãƒ•ãƒˆè©³ç´°ã‚’è¡¨ç¤ºã§ãã‚‹", async () => {
      const liftName = await screen.findByText("ãƒªãƒ•ãƒˆ1");
      const trailName1 = await screen.findByText("ã‚³ãƒ¼ã‚¹1");
      const trailName2 = await screen.findByText("ã‚³ãƒ¼ã‚¹2");

      expect(liftName).toBeInTheDocument();
      expect(trailName1).toBeInTheDocument();
      expect(trailName2).toBeInTheDocument();
    });
  });

  describe("ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´ãƒãƒƒãƒ—ã‚ªãƒ¼ãƒãƒ¼ã‚’é–‹ã", () => {
    describe("ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’Closedã«ã™ã‚‹", () => {
      describe("æ›´æ–°ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯", () => {
        // MEMO: ã‚¹ãƒ‘ã‚¤ã®æ³¨å…¥ãŒå¿…è¦ãªãŸã‚ã€lift-form.test.tsxã§å®Ÿæ–½
        test.todo("ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã®å¤‰æ›´ãŒå®Ÿè¡Œã•ã‚Œã‚‹");
      });

      describe("é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯", () => {
        beforeEach(async () => {
          const { container } = render(
            <Stories.ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’Closedã«å¤‰æ›´ã—ã¦é–‰ã˜ã‚‹ />
          );

          await Stories.ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’Closedã«å¤‰æ›´ã—ã¦é–‰ã˜ã‚‹.play({
            canvasElement: container,
          });
        });

        test("ãƒ•ã‚©ãƒ¼ãƒ ã®å€¤ãŒãƒªã‚»ãƒƒãƒˆã•ã‚Œã¦OPENã«æˆ»ã£ã¦ã„ã‚‹", async () => {
          // ç¢ºèªã®ãŸã‚å†åº¦ãƒãƒƒãƒ—ã‚ªãƒ¼ãƒãƒ¼ã‚’é–‹ã
          const openPopoverButton = await screen.findByRole("button", {
            name: "ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’å¤‰æ›´",
          });
          await userEvent.click(openPopoverButton);

          const radioButtonOpen = screen.getByRole("radio", { name: "OPEN" });

          expect(radioButtonOpen).toBeChecked();
        });
      });
    });
  });
});
```

## è‡ªå‹•ç”Ÿæˆã§ãã‚‹éƒ¨åˆ†ã¯è‡ªå‹•ç”Ÿæˆã™ã‚‹

Jestã€Storybookã€testing-libraryã€MSWãªã©ã®ä¾¿åˆ©ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒãŸãã•ã‚“ã‚ã‚‹ã¨ã¯ã„ãˆã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å®Ÿè£…ã™ã‚‹ãŸã³ã«å¤§é‡ã®å®šå‹æ–‡ã‚’æ›¸ã‹ãªã‘ã‚Œã°ãªã‚‰ãªã„ã®ã¯ã—ã‚“ã©ã„ã§ã™ã€‚ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã®ãŒã‚ã‚“ã©ãã•ãã¦èª°ã‚‚ãƒ†ã‚¹ãƒˆã‚’æ›¸ã‹ãªããªã£ãŸã€ã¨ã„ã£ãŸäº‹æ…‹ã‚’é¿ã‘ã‚‹ãŸã‚ã«ã€è‡ªå‹•ç”Ÿæˆã§ãã‚‹éƒ¨åˆ†ã¯è‡ªå‹•ç”Ÿæˆã—ãŸã„ã‚‚ã®ã§ã™ã€‚

ã¾ãšã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨Storybookã¨jestã®3ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åŒæ™‚ã«ç”Ÿæˆã§ãã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’[scaffdog](https://scaff.dog/)ã‚’ä½¿ã£ã¦ç”¨æ„ã—ã¾ã—ãŸã€‚

[ç”¨æ„ã—ãŸmd](https://gist.github.com/gn-t-k/7847b69fd5337c731a12855ad92ada1e)
ï¼ˆmarkdownã®ä¸­ã«markdownæ›¸ãã®ã†ã¾ãã„ã‹ãªã„â€¦ï¼‰

â†‘ã®ã‚ˆã†ãªmarkdownã‚’ç”¨æ„ã—ã¦ã€package.jsonã®scriptã«`"gen:component": "yarn run scaffdog generate component"`ãªã©ç”¨æ„ã—ã¦ãŠã‘ã°ã€`yarn gen:component`ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦å¯¾è©±å½¢å¼ã§ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å ´æ‰€ã‚„åå‰ãªã©ã‚’æŒ‡å®šã™ã‚‹ã ã‘ã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨Storybookã¨jestã®3ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åŒæ™‚ã«ç”Ÿæˆã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚

æ¬¡ã«ã€MSWã®handlerã‚‚è‡ªå‹•ç”Ÿæˆã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚ä»Šå›ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯APIã¸ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã™ã‚‹hooksãªã©ã‚’GraphQL Code Generatorã§è‡ªå‹•ç”Ÿæˆã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ï¼ˆãƒ†ã‚¹ãƒˆã¨é–¢ä¿‚ãªã„ã®ã§è©³ç´°ã¯çœãã¾ã™ï¼‰ã€‚[@graphql-codegen/typescript-msw](https://the-guild.dev/graphql/codegen/plugins/typescript/typescript-msw)ã¨ã„ã†GraphQL Code Generatorã®pluginã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€hooksãªã©ã¨ã„ã£ã—ã‚‡ã«MSWã®handlerã‚‚è‡ªå‹•ç”Ÿæˆã—ã¦ãã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸhandlerãŒã‚ã‚‹ã¨ã€Storybookã§MSWã‚’ã¤ã‹ã£ã¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ãƒ¢ãƒƒã‚¯ã™ã‚‹ã¨ãã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ã‚¯ã‚¨ãƒªã‚’æ›¸ã„ãŸã‚Šãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å‹ã‚’æŒ‡å®šã™ã‚‹æ‰‹é–“ãŒçœã‘ã¾ã™ã€‚

```typescript
import { mockGeneratedQueryMsw } from "path/to/generated";

// ã€œã€œ

const Template: Story = {
  render: (props: Partial<Props>) => {
    return <Wrapper {...props} />;
  },
  parameters: {
    msw: {
      handlers: [
        // è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸhandler
        mockGeneratedQueryMsw((req, res, ctx) => {
          return res(
            ctx.data({
              // ã“ã“ã«ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å®šç¾©ã™ã‚‹
            })
          );
        }),
      ],
    },
  },
};
```

### ã™ãã«å‹•ä½œç¢ºèªã§ãã‚‹ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç’°å¢ƒã‚’ç”¨æ„ã™ã‚‹
